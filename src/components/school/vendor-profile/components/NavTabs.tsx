"use client";
import { useSearchParams, useRouter, usePathname } from "next/navigation";
import { saveVendorProfileScrollAndFocus } from "../utils/navPreserve";

export default function NavTabs() {
  const searchParams = useSearchParams();
  const router = useRouter();
  const pathname = usePathname();
  const activeTab = searchParams.get("tab") || "listings";

  const tabs = [
    {
      id: "listings",
      label: "Listings",
      icon: (
        <svg viewBox="0 0 16 16" strokeLinejoin="round">
          <path
            fill="currentColor"
            d="M2.5 4C3.19036 4 3.75 3.44036 3.75 2.75C3.75 2.05964 3.19036 1.5 2.5 1.5C1.80964 1.5 1.25 2.05964 1.25 2.75C1.25 3.44036 1.80964 4 2.5 4ZM2.5 9.25C3.19036 9.25 3.75 8.69036 3.75 8C3.75 7.30964 3.19036 6.75 2.5 6.75C1.80964 6.75 1.25 7.30964 1.25 8C1.25 8.69036 1.80964 9.25 2.5 9.25ZM3.75 13.25C3.75 13.9404 3.19036 14.5 2.5 14.5C1.80964 14.5 1.25 13.9404 1.25 13.25C1.25 12.5596 1.80964 12 2.5 12C3.19036 12 3.75 12.5596 3.75 13.25ZM6.75 2H6V3.5H6.75H14.25H15V2H14.25H6.75ZM6.75 7.25H6V8.75H6.75H14.25H15V7.25H14.25H6.75ZM6.75 12.5H6V14H6.75H14.25H15V12.5H14.25H6.75Z"
            clipRule="evenodd"
            fillRule="evenodd"
          ></path>
        </svg>
      ),
    },
    {
      id: "offers",
      label: "Offers",
      icon: (
        <svg
          strokeLinejoin="round"
          strokeLinecap="round"
          strokeWidth="1.2"
          stroke="currentColor"
          fill="none"
          viewBox="0 0 18 18"
        >
          <rect ry="1.5" rx="1.5" height="8" width="12" y="6.5" x="3"></rect>
          <path d="M7 6.5V5.5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1"></path>
        </svg>
      ),
    },
    {
      id: "collections",
      label: "Collections",
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          height="20"
          width="20"
          fill="currentColor"
        >
          <path
            d="M16 9a7 7 0 1 1 0 14 7 7 0 1 1 0-14zm4-7a2 2 0 0 1 2 2v4h-1.5V3.5h-17v17H8V22H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16zm-3 10h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3z"
            fillRule="nonzero"
          ></path>
        </svg>
      ),
    },
    {
      id: "liked",
      label: "Liked",
      icon: (
        <svg fill="none" viewBox="0 0 16 16">
          <path
            strokeLinejoin="round"
            strokeLinecap="round"
            strokeWidth="1.5"
            stroke="currentColor"
            d="M10.7408 2C13.0889 2 14.6667 4.235 14.6667 6.32C14.6667 10.5425 8.11856 14 8.00004 14C7.88152 14 1.33337 10.5425 1.33337 6.32C1.33337 4.235 2.91115 2 5.2593 2C6.60745 2 7.48893 2.6825 8.00004 3.2825C8.51115 2.6825 9.39263 2 10.7408 2Z"
          ></path>
        </svg>
      ),
    },
    {
      id: "reviews",
      label: "Reviews",
      icon: (
        <svg
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
        >
          <path d="M22.954 9.395C22.832 9.017 22.481 8.756 22.058 8.747L15.298 8.823L12.878 1.628C12.746 1.252 12.39 1 11.992 1H11.99C11.591 1 11.236 1.254 11.103 1.639L8.72301 8.822L1.92101 8.686C1.52101 8.693 1.16901 8.953 1.04601 9.333C0.922011 9.714 1.05401 10.132 1.36001 10.361L6.82101 14.607L4.55601 21.791C4.44101 22.173 4.58101 22.588 4.90501 22.821C5.23101 23.056 5.66501 23.056 5.99101 22.829L12.121 18.526L17.994 22.83C18.155 22.942 18.343 22.998 18.531 22.998C18.726 22.998 18.919 22.938 19.083 22.819C19.406 22.583 19.544 22.169 19.424 21.777L17.129 14.74L22.628 10.43C22.946 10.189 23.077 9.772 22.954 9.393V9.395ZM16.211 13.554C15.736 13.916 15.534 14.541 15.711 15.123L17.463 20.581L12.942 17.268C12.451 16.925 11.794 16.927 11.304 17.268L6.49301 20.646L8.25601 15.053C8.42901 14.482 8.22601 13.856 7.76201 13.504L3.60601 10.222L8.80301 10.326C9.39901 10.313 9.93101 9.927 10.13 9.353L11.997 3.719L13.895 9.363C14.091 9.927 14.622 10.313 15.243 10.326L20.405 10.267L16.211 13.554Z"></path>
        </svg>
      ),
    },
    {
      id: "connections",
      label: "Connections",
      icon: (
        <svg
          viewBox="0 0 256 256"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M125.18,156.94a64,64,0,1,0-82.36,0,100.23,100.23,0,0,0-39.49,32,12,12,0,0,0,19.35,14.2,76,76,0,0,1,122.64,0,12,12,0,0,0,19.36-14.2A100.33,100.33,0,0,0,125.18,156.94ZM44,108a40,40,0,1,1,40,40A40,40,0,0,1,44,108Zm206.1,97.67a12,12,0,0,1-16.78-2.57A76.31,76.31,0,0,0,172,172a12,12,0,0,1,0-24,40,40,0,1,0-10.3-78.67,12,12,0,1,1-6.16-23.19,64,64,0,0,1,57.64,110.8,100.23,100.23,0,0,1,39.49,32A12,12,0,0,1,250.1,205.67Z"></path>
        </svg>
      ),
    },
    {
      id: "members",
      label: "Members",
      icon: (
        <svg fill="none" viewBox="0 0 32 32">
          <path
            fill="currentColor"
            d="M16.4847 5.82368C14.8958 5.82368 13.6733 7.05276 13.6733 8.48961C13.6733 9.92647 14.8958 11.1555 16.4847 11.1555C18.0736 11.1555 19.2961 9.92647 19.2961 8.48961C19.2961 7.05276 18.0736 5.82368 16.4847 5.82368ZM11.7324 8.48961C11.7324 5.90979 13.8963 3.88281 16.4847 3.88281C19.0731 3.88281 21.2369 5.90979 21.2369 8.48961C21.2369 11.0694 19.0731 13.0964 16.4847 13.0964C13.8963 13.0964 11.7324 11.0694 11.7324 8.48961ZM7.66046 10.6722C6.76779 10.6722 6.10968 11.3586 6.10968 12.126C6.10968 12.8934 6.76779 13.5798 7.66046 13.5798C8.55312 13.5798 9.21123 12.8934 9.21123 12.126C9.21123 11.3586 8.55312 10.6722 7.66046 10.6722ZM4.16881 12.126C4.16881 10.2156 5.76834 8.7313 7.66046 8.7313C9.55257 8.7313 11.1521 10.2156 11.1521 12.126C11.1521 14.0363 9.55257 15.5207 7.66046 15.5207C5.76834 15.5207 4.16881 14.0363 4.16881 12.126ZM25.3089 10.6722C24.4163 10.6722 23.7582 11.3586 23.7582 12.126C23.7582 12.8934 24.4163 13.5798 25.3089 13.5798C26.2016 13.5798 26.8597 12.8934 26.8597 12.126C26.8597 11.3586 26.2016 10.6722 25.3089 10.6722ZM21.8173 12.126C21.8173 10.2156 23.4168 8.7313 25.3089 8.7313C27.201 8.7313 28.8006 10.2156 28.8006 12.126C28.8006 14.0363 27.201 15.5207 25.3089 15.5207C23.4168 15.5207 21.8173 14.0363 21.8173 12.126ZM16.4847 16.7328C14.2186 16.7328 12.3039 18.078 11.5266 19.9449C11.2851 20.5254 11.1521 21.1585 11.1521 21.8229V23.2768H21.8173V21.8229C21.8173 21.1585 21.6843 20.5254 21.4428 19.9449C20.6655 18.078 18.7508 16.7328 16.4847 16.7328ZM23.4576 19.8169C23.6532 20.4531 23.7582 21.1267 23.7582 21.8229V23.2768H28.1203V21.8229C28.1203 20.3861 26.8978 19.157 25.3089 19.157C24.5952 19.157 23.9494 19.4081 23.4576 19.8169ZM22.6105 18.0304C21.3124 16.0742 19.0455 14.7919 16.4847 14.7919C13.9239 14.7919 11.657 16.0742 10.3589 18.0304C9.59018 17.5156 8.65918 17.2161 7.66046 17.2161C5.0721 17.2161 2.9082 19.2431 2.9082 21.8229V24.2472C2.9082 24.7831 3.34268 25.2176 3.87864 25.2176H29.0908C29.6267 25.2176 30.0612 24.7831 30.0612 24.2472V21.8229C30.0612 19.2431 27.8973 17.2161 25.3089 17.2161C24.3102 17.2161 23.3792 17.5156 22.6105 18.0304ZM9.5118 19.8169C9.01995 19.4081 8.37421 19.157 7.66046 19.157C6.07155 19.157 4.84907 20.3861 4.84907 21.8229V23.2768H9.21123V21.8229C9.21123 21.1267 9.31625 20.4531 9.5118 19.8169Z"
            clipRule="evenodd"
            fillRule="evenodd"
          ></path>
        </svg>
      ),
    },
  ];

  return (
    <nav className="flex gap-4 md:gap-8 border-b border-[#E5E7EB] mb-6 md:mb-8 pb-3 md:pb-0.5 overflow-x-auto scrollbar-hide" style={{ WebkitOverflowScrolling: 'touch' }}>
      {tabs.map((tab) => (
        <div
          key={tab.id}
          data-vp-focus={`tab:${tab.id}`}
          tabIndex={-1}
          className={`flex items-center gap-2 px-3 md:px-1 py-2 md:py-3 text-sm md:text-base text-[#5F5F5F] font-medium cursor-pointer border-b-2 transition-all whitespace-nowrap ${
            activeTab === tab.id
              ? "text-[#016853] border-[#016853]"
              : "border-transparent"
          }`}
          onClick={() => {
            saveVendorProfileScrollAndFocus(`tab:${tab.id}`);
            router.push(`${pathname}?tab=${tab.id}`, { scroll: false });
          }}
        >
          <span className="w-[18px] h-[18px] md:w-5 md:h-5">{tab.icon}</span>
          {tab.label}
        </div>
      ))}
    </nav>
  );
}
